{"version":3,"sources":["components/Post/Post.module.css","components/Post/Post.tsx","App/App.tsx","index.tsx","App/App.module.css"],"names":["module","exports","Post","useState","url","setUrl","thumbnail","setThumbnail","getPost","useDebouncedFn","postUrl","a","fetch","process","response","ok","json","postInfo","width","thumbnail_width","height","thumbnail_height","thumbnail_url","console","log","status","handleChange","event","target","value","useEffect","trim","className","styles","PostHeader","PostTextField","name","placeholder","onChange","onBlur","PostMeta","toFixed","alt","PostThumbnail","src","App","AppHeader","AppPosts","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oJACAA,EAAOC,QAAU,CAAC,KAAO,mBAAmB,WAAa,yBAAyB,cAAgB,4BAA4B,mBAAqB,iCAAiC,SAAW,uBAAuB,cAAgB,8B,iKCsFvNC,EA7EQ,WAAO,IAAD,EACHC,mBAAS,IADN,mBAClBC,EADkB,KACbC,EADa,OAESF,mBAA4B,MAFrC,mBAElBG,EAFkB,KAEPC,EAFO,KAInBC,EAAUC,YAAc,uCAAC,WAAOC,GAAP,iBAAAC,EAAA,sEACJC,MAAM,wDAAD,OACgCF,EADhC,yBACwDG,kBADxD,YACuFA,qCAFxF,YACrBC,EADqB,QAKdC,GALc,iCAMAD,EAASE,OANT,OAMjBC,EANiB,OAQvBV,EAAa,CACTW,MAAOD,EAASE,gBAChBC,OAAQH,EAASI,iBACjBjB,IAAKa,EAASK,gBAXK,wBAcvBC,QAAQC,IAAR,qDAA4BV,EAASW,SAdd,4CAAD,sDAgB3B,KAEGC,EAAe,SAACC,GAClBtB,EAAOsB,EAAMC,OAAOC,QAgBxB,OAbAC,qBACI,WACS1B,GAAQA,EAAI2B,QAIjBvB,EAAQJ,KAEZ,CAACA,IAGLmB,QAAQC,IAAIlB,GAGR,sBAAK0B,UAAWC,IAAO/B,KAAvB,UACI,sBAAK8B,UAAWC,IAAOC,WAAvB,UACI,uBACIF,UAAWC,IAAOE,cAClBC,KAAK,MACLC,YAAY,iCACZR,MAAOzB,EACPkC,SAAUZ,EACVa,OAAQb,IAIRpB,GACAA,EAAUY,OACVZ,EAAUc,QACN,sBAAKY,UAAWC,IAAOO,SAAvB,UACI,sGACmBlC,EAAUY,MAD7B,MACuCZ,EAAUc,UAEjD,oKAC+Bd,EAAUY,MAAQZ,EAAUc,QAAQqB,QAAQ,YAQvFnC,GACAA,EAAUF,KACN,qBAAKsC,IAAI,GAAGV,UAAWC,IAAOU,cAAeC,IAAKtC,EAAUF,UC5DjEyC,MAhBf,WACE,OACE,sBAAKb,UAAWC,IAAOY,IAAvB,UACI,qBAAKb,UAAWC,IAAOa,UAAvB,SACI,gEAGJ,sBAAKd,UAAWC,IAAOc,SAAvB,UACI,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,WCTZC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U,kBCR1BpD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,UAAY,uBAAuB,SAAW,yB","file":"static/js/main.51c46417.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Post\":\"Post_Post__2uao7\",\"PostHeader\":\"Post_PostHeader__2DZit\",\"PostTextField\":\"Post_PostTextField__2ezc_\",\"PostTextFieldError\":\"Post_PostTextFieldError__VfHIU\",\"PostMeta\":\"Post_PostMeta__1lPrZ\",\"PostThumbnail\":\"Post_PostThumbnail__1tK9f\"};","import React, { useState, useEffect } from 'react';\nimport { useDebouncedFn } from 'beautiful-react-hooks';\nimport styles from './Post.module.css';\n\ninterface IThumbnail {\n    width: number,\n    height: number,\n    url: string,\n}\n\nconst Post: React.FC = () => {\n    const [url, setUrl] = useState('');\n    const [thumbnail, setThumbnail] = useState<IThumbnail | null>(null);\n\n    const getPost = useDebouncedFn(async (postUrl: string) => {\n        const response = await fetch(\n            `https://graph.facebook.com/v8.0/instagram_oembed?url=${postUrl}&access_token=${process.env.REACT_APP_FB_ID}|${process.env.REACT_APP_FB_ACCESS_TOKEN}`\n        );\n\n        if (response.ok) {\n            const postInfo = await response.json();\n\n            setThumbnail({\n                width: postInfo.thumbnail_width,\n                height: postInfo.thumbnail_height,\n                url: postInfo.thumbnail_url,\n            });\n        } else {\n            console.log(`Ошибка HTTP: ${response.status}`);\n        }\n    }, 2000);\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setUrl(event.target.value);\n    };\n\n    useEffect(\n        () => {\n            if (!url || !url.trim()) {\n                return;\n            }\n\n            getPost(url);\n        },\n        [url]\n    );\n\n    console.log(thumbnail);\n\n    return (\n        <div className={styles.Post}>\n            <div className={styles.PostHeader}>\n                <input\n                    className={styles.PostTextField}\n                    name=\"url\"\n                    placeholder=\"Insert the Instagram post link\"\n                    value={url}\n                    onChange={handleChange}\n                    onBlur={handleChange}\n                />\n\n                {\n                    thumbnail &&\n                    thumbnail.width &&\n                    thumbnail.height && (\n                        <div className={styles.PostMeta}>\n                            <p>\n                                размеры фото: {thumbnail.width} x {thumbnail.height}\n                            </p>\n                            <p>\n                                соотношение сторон фото: {(thumbnail.width / thumbnail.height).toFixed(3)}\n                            </p>\n                        </div>\n                    )\n                }\n            </div>\n\n            {\n                thumbnail &&\n                thumbnail.url && (\n                    <img alt=\"\" className={styles.PostThumbnail} src={thumbnail.url} />\n                )\n            }\n        </div>\n    );\n};\n\nexport default Post;\n","import React from 'react';\nimport styles from './App.module.css';\nimport Post from '../components/Post/Post';\n\nfunction App() {\n  return (\n    <div className={styles.App}>\n        <div className={styles.AppHeader}>\n            <h1>Instagram. Post&nbsp;Comparing</h1>\n        </div>\n\n        <div className={styles.AppPosts}>\n            <Post />\n            <Post />\n            <Post />\n        </div>\n    </div>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2htTF\",\"AppHeader\":\"App_AppHeader__2GlIR\",\"AppPosts\":\"App_AppPosts__27Q0L\"};"],"sourceRoot":""}