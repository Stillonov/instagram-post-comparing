{"version":3,"sources":["components/Post/Post.module.css","components/Post/Post.tsx","components/App/App.tsx","index.tsx","components/App/App.module.css"],"names":["module","exports","Post","useState","thumbnail","setThumbnail","error","setError","handleChange","useDebouncedFn","event","a","url","target","value","trim","fetch","process","response","ok","json","data","width","thumbnail_width","height","thumbnail_height","thumbnail_url","className","styles","PostHeader","PostTextField","PostTextFieldError","name","placeholder","onChange","onFocus","select","PostMeta","toFixed","alt","PostThumbnail","src","App","AppHeader","AppPosts","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oJACAA,EAAOC,QAAU,CAAC,KAAO,mBAAmB,WAAa,yBAAyB,cAAgB,4BAA4B,mBAAqB,iCAAiC,SAAW,uBAAuB,cAAgB,8B,iKCmFvNC,EA5EQ,WAAO,IAAD,EACSC,mBAA4B,MADrC,mBAClBC,EADkB,KACPC,EADO,OAECF,oBAAS,GAFV,mBAElBG,EAFkB,KAEXC,EAFW,KAInBC,EAAeC,YAAc,uCAC/B,WAAOC,GAAP,mBAAAC,EAAA,0DACUC,EAAMF,EAAMG,OAAOC,QAEZF,EAAIG,OAHrB,uBAIQV,EAAa,MAJrB,0CASqCW,MAAM,wDAAD,OACsBJ,EADtB,yBAjB5BK,kBAiB4B,YAhBlBA,qCAOxB,YASUC,EATV,QAaiBC,GAbjB,kCAc4BD,EAASE,OAdrC,QAccC,EAdd,OAgBQd,GAAS,GAETF,EAAa,CACTiB,MAAOD,EAAKE,gBACZC,OAAQH,EAAKI,iBACbb,IAAKS,EAAKK,gBArBtB,wBAwBQnB,GAAS,GAxBjB,4CAD+B,sDA4B/B,KAOJ,OACI,sBAAKoB,UAAWC,IAAO1B,KAAvB,UACI,sBAAKyB,UAAWC,IAAOC,WAAvB,UACI,uBACIF,UAAS,UAAKC,IAAOE,cAAZ,YACLxB,EAAQsB,IAAOG,mBAAqB,IAExCC,KAAK,MACLC,YAAY,iCACZC,SAAU1B,EACV2B,QAdI,SAACzB,GACjBA,EAAMG,OAAOuB,aAgBH9B,GAASF,GAAaA,EAAUkB,OAASlB,EAAUoB,QACjD,sBAAKG,UAAWC,IAAOS,SAAvB,UACI,uCACWjC,EAAUkB,MADrB,MAC+BlB,EAAUoB,UAEzC,uCACW,KACLpB,EAAUkB,MAAQlB,EAAUoB,QAAQc,QAAQ,aAM5DhC,GAASF,GAAaA,EAAUQ,KAC9B,qBACI2B,IAAI,GACJZ,UAAWC,IAAOY,cAClBC,IAAKrC,EAAUQ,UC3DpB8B,EAdO,kBAClB,sBAAKf,UAAWC,IAAOc,IAAvB,UACI,qBAAKf,UAAWC,IAAOe,UAAvB,SACI,iEAGJ,sBAAKhB,UAAWC,IAAOgB,SAAvB,UACI,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,WCRZC,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MAEJC,SAASC,eAAe,U,kBCR5BjD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,UAAY,uBAAuB,SAAW,yB","file":"static/js/main.82b7909d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Post\":\"Post_Post__2uao7\",\"PostHeader\":\"Post_PostHeader__2DZit\",\"PostTextField\":\"Post_PostTextField__2ezc_\",\"PostTextFieldError\":\"Post_PostTextFieldError__VfHIU\",\"PostMeta\":\"Post_PostMeta__1lPrZ\",\"PostThumbnail\":\"Post_PostThumbnail__1tK9f\"};","import React, { useState } from 'react';\nimport { useDebouncedFn } from 'beautiful-react-hooks';\nimport { IPostInfo, IThumbnail } from '../../interfaces';\nimport styles from './Post.module.css';\n\nconst FB_ID: string = process.env.REACT_APP_FB_ID || '';\nconst FB_ACCESS_TOKEN: string = process.env.REACT_APP_FB_ACCESS_TOKEN || '';\n\nconst Post: React.FC = () => {\n    const [thumbnail, setThumbnail] = useState<IThumbnail | null>(null);\n    const [error, setError] = useState(false);\n\n    const handleChange = useDebouncedFn(\n        async (event: React.ChangeEvent<HTMLInputElement>): Promise<void> => {\n            const url = event.target.value;\n\n            if (!url || !url.trim()) {\n                setThumbnail(null);\n\n                return;\n            }\n\n            const response: Response = await fetch(\n                `https://graph.facebook.com/v8.0/instagram_oembed?url=${url}&access_token=${FB_ID}|${FB_ACCESS_TOKEN}`\n            );\n\n            if (response.ok) {\n                const data = (await response.json()) as IPostInfo;\n\n                setError(false);\n\n                setThumbnail({\n                    width: data.thumbnail_width,\n                    height: data.thumbnail_height,\n                    url: data.thumbnail_url,\n                });\n            } else {\n                setError(true);\n            }\n        },\n        300\n    );\n\n    const handleFocus = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        event.target.select();\n    };\n\n    return (\n        <div className={styles.Post}>\n            <div className={styles.PostHeader}>\n                <input\n                    className={`${styles.PostTextField} ${\n                        error ? styles.PostTextFieldError : ''\n                    }`}\n                    name=\"url\"\n                    placeholder=\"Insert the Instagram post link\"\n                    onChange={handleChange}\n                    onFocus={handleFocus}\n                />\n\n                {!error && thumbnail && thumbnail.width && thumbnail.height && (\n                    <div className={styles.PostMeta}>\n                        <p>\n                            size: {thumbnail.width} x {thumbnail.height}\n                        </p>\n                        <p>\n                            ratio:{' '}\n                            {(thumbnail.width / thumbnail.height).toFixed(3)}\n                        </p>\n                    </div>\n                )}\n            </div>\n\n            {!error && thumbnail && thumbnail.url && (\n                <img\n                    alt=\"\"\n                    className={styles.PostThumbnail}\n                    src={thumbnail.url}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default Post;\n","import React from 'react';\nimport styles from './App.module.css';\nimport Post from '../Post/Post';\n\nconst App: React.FC = () => (\n    <div className={styles.App}>\n        <div className={styles.AppHeader}>\n            <h1>Instagram. Posts&nbsp;Comparing</h1>\n        </div>\n\n        <div className={styles.AppPosts}>\n            <Post />\n            <Post />\n            <Post />\n        </div>\n    </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__aOmNj\",\"AppHeader\":\"App_AppHeader__1RQkw\",\"AppPosts\":\"App_AppPosts__17Ybj\"};"],"sourceRoot":""}